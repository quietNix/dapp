(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{15:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=15},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return F}));var c=n(0),a=n.n(c),s=n(10),r=n.n(s),i=n(3),o=n(22),u=n(2),l=n.n(u),d=n(6),b=n(7),j=n.n(b),m=(n(37),n(54),j()({peers:["https://quietnix-dapp.herokuapp.com/gun"]})),h=m.user().recall({sessionStorage:!0});function O(e){F.dispatch({type:"USER_AUTH_STATUS",payload:e})}h.get("alias").on((function(e){return O(e)})),m.on("auth",function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("alias");case 2:O(n=e.sent),console.log("signed in as ".concat(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var p=n(1);var f=Object(i.b)((function(e){return{username:e.username}}))((function(e){var t=e.username;return Object(p.jsxs)("header",{children:[Object(p.jsx)("h1",{children:"\ud83d\udcac"}),""===t?Object(p.jsx)("h3",{children:"Dapp Chat"}):Object(p.jsxs)(c.Fragment,{children:[Object(p.jsxs)("div",{className:"user-bio",children:[Object(p.jsx)("span",{children:Object(p.jsx)("strong",{children:t})}),Object(p.jsx)("img",{src:"https://avatars.dicebear.com/api/initials/".concat(t,".svg"),alt:"avatar"})]}),Object(p.jsx)("button",{className:"signout-button",onClick:function(){h.leave(),O("")},children:"Sign Out"})]})]})})),v=n(11),x=n(4),g=n(21),w=n(9);n(56);var _=function(e){var t=e.who===e.sender?"sent":"received",n="https://avatars.dicebear.com/api/initials/".concat(e.who,".svg"),c=new Date(e.when);return Object(p.jsxs)("div",{className:"message ".concat(t),children:[Object(p.jsx)("img",{src:n,alt:"avatar"}),Object(p.jsxs)("div",{className:"message-text",children:[Object(p.jsx)("p",{children:e.what}),Object(p.jsx)("time",{children:c.toLocaleTimeString()})]})]})};var y=function(){function e(){var e=document.getElementById("username").value.toLowerCase(),t=document.getElementById("password").value;h.auth(e,t,(function(e){var t=e.err;return t&&alert(t)}))}return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"username",children:"Username"}),Object(p.jsx)("input",{className:"credential",id:"username",name:"username",value:undefined,minLength:"3",maxLength:"16"}),Object(p.jsx)("label",{htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{className:"credential",id:"password",name:"password",value:undefined,type:"password"}),Object(p.jsx)("button",{className:"login",onClick:e,children:"Login"}),Object(p.jsx)("button",{className:"login",onClick:function(){var t=document.getElementById("username").value,n=document.getElementById("password").value;h.create(t,n,(function(t){var n=t.err;n?alert(n):e()}))},children:"Sign Up"})]})};var N=function(e){var t=e.chatRoom,n=e.setChatRoom,a=Object(c.useRef)(null),s=Object(c.useRef)(null),r=Object(c.useRef)(null);function i(e){console.log(e),n(e)}return Object(c.useEffect)((function(){switch(t){case"common":a.current.classList.add("sidebar__btn--selected"),s.current.classList.remove("sidebar__btn--selected"),r.current.classList.remove("sidebar__btn--selected");break;case"games":s.current.classList.add("sidebar__btn--selected"),a.current.classList.remove("sidebar__btn--selected"),r.current.classList.remove("sidebar__btn--selected");break;case"academics":r.current.classList.add("sidebar__btn--selected"),a.current.classList.remove("sidebar__btn--selected"),s.current.classList.remove("sidebar__btn--selected")}})),Object(p.jsx)("aside",{className:"sidebar",children:Object(p.jsxs)("nav",{children:[Object(p.jsx)("p",{className:"sidebar__btn",ref:a,onClick:function(){i("common")},children:"Common"}),Object(p.jsx)("p",{className:"sidebar__btn",ref:s,onClick:function(){i("games")},children:"Games"}),Object(p.jsx)("p",{className:"sidebar__btn",ref:r,onClick:function(){i("academics")},children:"Academics"})]})})},S=j.a.SEA,k=!1;function L(){var e=document.getElementById("cont");e.scrollTop=e.scrollHeight}var C=Object(i.b)((function(e){return{username:e.username}}))((function(e){var t=e.username,n=Object(c.useState)("common"),a=Object(w.a)(n,2),s=a[0],r=a[1],i=Object(c.useState)(!0),o=Object(w.a)(i,2),u=o[0],b=o[1],O=Object(c.useState)(""),f=Object(w.a)(O,2),C=f[0],E=f[1],T=Object(c.useState)({common:[],games:[],academics:[]}),U=Object(w.a)(T,2),F=U[0],R=U[1],I={common:[],games:[],academics:[]};function B(){return(B=Object(d.a)(l.a.mark((function e(t){var n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,S.encrypt(C,"#Nikhil");case 3:n=e.sent,c=(new Date).toISOString(),a=h.get("all").set({what:n}),m.get(s).get(c).put(a),E(""),b(!0),L();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){""!==t&&(Object.keys(I).map((function(e){m.get(e).map().once(function(){var t=Object(d.a)(l.a.mark((function t(n,c){var a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=12;break}return a="#Nikhil",t.next=4,m.user(n).get("alias");case 4:return t.t0=t.sent,t.next=7,S.decrypt(n.what,a);case 7:t.t1=t.sent,t.t2=t.t1+"",t.t3=j.a.state.is(n,"what"),(s={who:t.t0,what:t.t2,when:t.t3}).what&&(I[e]=[].concat(Object(g.a)(I[e].slice(-50)),[s]).sort((function(e,t){return e.when-t.when})),R((function(t){return Object(x.a)(Object(x.a)({},t),{},Object(v.a)({},e,I[e]))})),u?(L(),b(!1)):k=!0);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})),console.log(F))}),[t]),Object(p.jsxs)("div",{className:"container",children:[""!==t&&Object(p.jsx)(N,{chatRoom:s,setChatRoom:r}),""===t?Object(p.jsx)("div",{className:"div-main",children:Object(p.jsx)(y,{})}):Object(p.jsxs)(c.Fragment,{children:[Object(p.jsx)("main",{onScroll:function(){console.log("scroll")},id:"cont",children:F[s].map((function(e){return Object(p.jsx)(_,{id:e.when,when:e.when,what:e.what,who:e.who,sender:t},e.when)}))}),Object(p.jsxs)("form",{onSubmit:function(e){return B.apply(this,arguments)},children:[Object(p.jsx)("input",{type:"text",placeholder:"Type a message...",onChange:function(e){var t=e.target.value;E(t)},value:C,maxLength:"100"}),Object(p.jsx)("button",{className:"sent-emogy",type:"submit",disabled:!C,children:"\ud83d\udee9\ufe0f"})]}),u?"":Object(p.jsx)("div",{className:"scroll-button",children:Object(p.jsx)("button",{onClick:L,children:k?"\ud83d\udcac":"\ud83d\udc47"})})]})]})}));n(57);var E=function(e){return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(f,{}),Object(p.jsx)(C,{})]})},T={username:""},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))},F=Object(o.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"USER_AUTH_STATUS"===t.type?Object(x.a)(Object(x.a)({},e),{},{username:t.payload}):e}));r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(i.a,{store:F,children:Object(p.jsx)(E,{})})}),document.getElementById("root")),U()}},[[58,1,2]]]);
//# sourceMappingURL=main.30f979a1.chunk.js.map